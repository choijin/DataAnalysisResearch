<?xml version="1.0" encoding="UTF-8"?>
<rootTag>
<Award>
<AwardTitle>CAREER: Semantics, Abstractions, and Tools for a Pragmatic Verified LLVM Compiler</AwardTitle>
<AGENCY>NSF</AGENCY>
<AwardEffectiveDate>01/15/2015</AwardEffectiveDate>
<AwardExpirationDate>12/31/2020</AwardExpirationDate>
<AwardTotalIntnAmount>545000.00</AwardTotalIntnAmount>
<AwardAmount>561000</AwardAmount>
<AwardInstrument>
<Value>Continuing Grant</Value>
</AwardInstrument>
<Organization>
<Code>05010000</Code>
<Directorate>
<Abbreviation>CSE</Abbreviation>
<LongName>Direct For Computer &amp; Info Scie &amp; Enginr</LongName>
</Directorate>
<Division>
<Abbreviation>CCF</Abbreviation>
<LongName>Division of Computing and Communication Foundations</LongName>
</Division>
</Organization>
<ProgramOfficer>
<SignBlockName>Anindya Banerjee</SignBlockName>
<PO_EMAI>abanerje@nsf.gov</PO_EMAI>
<PO_PHON>7032927885</PO_PHON>
</ProgramOfficer>
<AbstractNarration>Title: : CAREER: Semantics, Abstractions, and Tools for a Pragmatic Verified LLVM Compiler&lt;br/&gt;&lt;br/&gt;Compilers are crucial components of the computing ecosystem. They can transform source programs written in multiple languages (e.g, C/C++/Java) into multiple target architectures (e.g, x86/ARM). Compiler bugs, however, break properties enforced at the level of source programs and can lead to unintended application behavior and disasters in safety-critical domains. This project aims to develop pragmatic and lightweight formal techniques for making mainstream compilers robust, in a manner that can be easily adopted by compiler developers. The intellectual merit of this project is the development of real-world compiler verification environments drawing influence from multiple areas like programming languages, architecture, and concurrency. The project's broader significance and importance are: (1) improving the quality of a large number of software projects by improving the robustness of the compiler, (2) inculcating formal reasoning for building large systems (compilers in particular) that are correct by construction, and (3) educating high school students, undergraduates, and graduate students for developing software with lightweight formal methods.&lt;br/&gt;&lt;br/&gt;This project aims to build new techniques and tools that can check the correctness of optimizations with the help of the developer. The project achieves this by (1) designing mathematically-precise semantics for various components of the mainstream LLVM compiler, (2) designing domain specific languages for writing and specifying LLVM optimizations, which not only check optimizations for correctness but also generate efficient C++ implementations, (3) designing techniques to build precise translation validators, which compare the source and the target code with assistance from the compiler developer. Technology  developed by this research will not only improve the reliability of compilers but also the reliability of other large software systems which depend on correct compilation.</AbstractNarration>
<MinAmdLetterDate>01/15/2015</MinAmdLetterDate>
<MaxAmdLetterDate>03/30/2020</MaxAmdLetterDate>
<ARRAAmount/>
<TRAN_TYPE>Grant</TRAN_TYPE>
<CFDA_NUM>47.070</CFDA_NUM>
<NSF_PAR_USE_FLAG>0</NSF_PAR_USE_FLAG>
<FUND_AGCY_CODE>4900</FUND_AGCY_CODE>
<AWDG_AGCY_CODE>4900</AWDG_AGCY_CODE>
<AwardID>1453086</AwardID>
<Investigator>
<FirstName>Santosh</FirstName>
<LastName>Nagarakatte</LastName>
<PI_MID_INIT/>
<PI_SUFX_NAME/>
<PI_FULL_NAME>Santosh Nagarakatte</PI_FULL_NAME>
<EmailAddress>santosh.nagarakatte@rutgers.edu</EmailAddress>
<PI_PHON>8484458407</PI_PHON>
<NSF_ID>000630570</NSF_ID>
<StartDate>01/15/2015</StartDate>
<EndDate/>
<RoleCode>Principal Investigator</RoleCode>
</Investigator>
<Institution>
<Name>Rutgers University New Brunswick</Name>
<CityName>Piscataway</CityName>
<ZipCode>088543925</ZipCode>
<PhoneNumber>8489320150</PhoneNumber>
<StreetAddress>33 Knightsbridge Road</StreetAddress>
<StreetAddress2><![CDATA[2nd Floor East Wing]]></StreetAddress2>
<CountryName>United States</CountryName>
<StateName>New Jersey</StateName>
<StateCode>NJ</StateCode>
<CONGRESSDISTRICT>06</CONGRESSDISTRICT>
<CONGRESS_DISTRICT_ORG>NJ06</CONGRESS_DISTRICT_ORG>
<ORG_DUNS_NUM>001912864</ORG_DUNS_NUM>
<ORG_LGL_BUS_NAME>RUTGERS, THE STATE UNIVERSITY OF NEW JERSEY</ORG_LGL_BUS_NAME>
<ORG_PRNT_DUNS_NUM>001912864</ORG_PRNT_DUNS_NUM>
</Institution>
<Performance_Institution>
<Name><![CDATA[Rutgers University New Brunswick]]></Name>
<CityName>Piscataway</CityName>
<StateCode>NJ</StateCode>
<ZipCode>088548072</ZipCode>
<StreetAddress><![CDATA[110 Frelinghuysen Road]]></StreetAddress>
<CountryCode>US</CountryCode>
<CountryName>United States</CountryName>
<StateName>New Jersey</StateName>
<CountryFlag>1</CountryFlag>
<CONGRESSDISTRICT>06</CONGRESSDISTRICT>
<CONGRESS_DISTRICT_PERF>NJ06</CONGRESS_DISTRICT_PERF>
</Performance_Institution>
<ProgramElement>
<Code>7798</Code>
<Text>Software &amp; Hardware Foundation</Text>
</ProgramElement>
<ProgramReference>
<Code>1045</Code>
<Text>CAREER-Faculty Erly Career Dev</Text>
</ProgramReference>
<ProgramReference>
<Code>7943</Code>
<Text>PROGRAMMING LANGUAGES</Text>
</ProgramReference>
<ProgramReference>
<Code>9251</Code>
<Text>REU SUPP-Res Exp for Ugrd Supp</Text>
</ProgramReference>
<Appropriation>
<Code>0115</Code>
<Name>NSF RESEARCH &amp; RELATED ACTIVIT</Name>
<APP_SYMB_ID>040100</APP_SYMB_ID>
</Appropriation>
<Appropriation>
<Code>0117</Code>
<Name>NSF RESEARCH &amp; RELATED ACTIVIT</Name>
<APP_SYMB_ID>040100</APP_SYMB_ID>
</Appropriation>
<Appropriation>
<Code>0118</Code>
<Name>NSF RESEARCH &amp; RELATED ACTIVIT</Name>
<APP_SYMB_ID>040100</APP_SYMB_ID>
</Appropriation>
<Appropriation>
<Code>0120</Code>
<Name>NSF RESEARCH &amp; RELATED ACTIVIT</Name>
<APP_SYMB_ID>040100</APP_SYMB_ID>
</Appropriation>
<FUND_OBLG>2015~209045</FUND_OBLG>
<FUND_OBLG>2017~108904</FUND_OBLG>
<FUND_OBLG>2018~227051</FUND_OBLG>
<FUND_OBLG>2020~16000</FUND_OBLG>
<POR>
<DRECONTENT><![CDATA[<div class="porColContainerWBG"> <div class="porContentCol"><p>The goal of this project is to develop usable&nbsp;formal tools for LLVM verification and educate/train students on formal verification. In this direction, we have completed the following tasks.</p> <p>1. We have been built the Alive-NJ prototype that allows the compiler writer to specify a peephole optimization in a domain specific language (DSL), which we call Alive. The Alive-NJ interpreter automatically checks the correctness of a peephole optimization by encoding the optimization as constraints in first-order logic. The validity of the constraints is automatically checked by using an SMT solver. The Alive DSL is both a specification and an implementation language. The Alive-NJ prototype automatically generates a C++ implementation that can be used within the LLVM compiler. Alive2, which is latest production version of Alive, is part of the LLVM compiler tool-chain. It is widely used by developers throughout the world.</p> <p>2. We discovered a new class of errors, which we call non-termination bugs,&nbsp; that arise when a suite of peephole optimizations is executed until a fixed point. An optimization can undo the effect of another optimization in the suite, which results in non-terminating compilation. We have designed a novel methodology to detect non-termination bugs with a suite of peephole optimizations,&nbsp; identified the necessary condition to ensure termination while composing peephole optimizations, and&nbsp; developed debugging support by generating concrete input programs that cause such non-terminating compilation.</p> <p>3. We identified that peephole optimizations related to floating point (FP) are typically errorneous. Hence, we&nbsp; designed&nbsp;Alive-FP, an automated verification framework for floating point based peephole optimizations in LLVM. Alive-FP handles a class of floating point optimizations and fast-math optimizations involving signed zeros, not-a-number, and infinities, which do not result in loss of accuracy. We explored multiple encodings for various floating point operations to account for the various kinds of undefined behavior and under-specification in the LLVM&rsquo;s language reference manual.</p> <p>4. Compiler developers typically transform an incorrect peephole optimization into a valid one by strengthening the precondition. This process is challenging and tedious even when the Alive-NJ prototype provides a counterexample. To help compiler writers develop a correct peephole optimization in such a scenario, we have developed ALIVE-INFER, a data-driven approach that infers preconditions for peephole optimizations expressed in Alive. ALIVE-INFER generates positive and negative examples for an optimization, enumerates predicates ondemand, and learns a set of predicates that separate the positive and negative examples. ALIVE-INFER repeats this process until it finds a precondition that ensures the validity of the optimization. ALIVE-INFER reports both a weakest precondition and a set of succinct partial preconditions to the developer. Our prototype generates preconditions that are weaker than LLVM&rsquo;s preconditions for numerous optimizations. We also demonstrate the applicability of this technique to generalize optimization patterns generated by Souper, an LLVM IR&ndash;based superoptimizer.</p> <p>5. To accomplish our educational goal of training students on formal reasoning skills,&nbsp; this grant partially supported&nbsp; the following PhD students on their research related to program analysis and verification: David Menendez, Jay Lim, Adarsh Yoga, Sangeeta Chowdhary, Mohammed Reza Soltaniyeh, and Nader Boushehrinejadmoradi. David Menendez (PhD 2018), Adarsh Yoga (PhD 2019), and Nader Boushehrinejadmoradi (PhD 2021) have subsequently graduated and are deploying these ideas in industry and academia. It also helped train numerous undergraduate students on various project related to formal verification. Two summer REU students Sammy Berger and Josh Cooper worked on formal verification for low-level code in the summer of 2020.&nbsp;</p> <p><span>Overall, our research findings and prototypes advance the state-of-the-art in formal verification of mainstream compilers. We have published our research findings at premier research venues. Furthermore, the grant was helpful in training&nbsp; PhD and undergraduate students in part, who are now applying these ideas in the field.</span></p> <p>&nbsp;</p> <p>&nbsp;</p> <p>&nbsp;</p><br> <p>            Last Modified: 03/01/2021<br>      Modified by: Santosh&nbsp;Nagarakatte</p> </div> <div class="porSideCol"></div> </div>]]></DRECONTENT>
<POR_COPY_TXT><![CDATA[ The goal of this project is to develop usable formal tools for LLVM verification and educate/train students on formal verification. In this direction, we have completed the following tasks.  1. We have been built the Alive-NJ prototype that allows the compiler writer to specify a peephole optimization in a domain specific language (DSL), which we call Alive. The Alive-NJ interpreter automatically checks the correctness of a peephole optimization by encoding the optimization as constraints in first-order logic. The validity of the constraints is automatically checked by using an SMT solver. The Alive DSL is both a specification and an implementation language. The Alive-NJ prototype automatically generates a C++ implementation that can be used within the LLVM compiler. Alive2, which is latest production version of Alive, is part of the LLVM compiler tool-chain. It is widely used by developers throughout the world.  2. We discovered a new class of errors, which we call non-termination bugs,  that arise when a suite of peephole optimizations is executed until a fixed point. An optimization can undo the effect of another optimization in the suite, which results in non-terminating compilation. We have designed a novel methodology to detect non-termination bugs with a suite of peephole optimizations,  identified the necessary condition to ensure termination while composing peephole optimizations, and  developed debugging support by generating concrete input programs that cause such non-terminating compilation.  3. We identified that peephole optimizations related to floating point (FP) are typically errorneous. Hence, we  designed Alive-FP, an automated verification framework for floating point based peephole optimizations in LLVM. Alive-FP handles a class of floating point optimizations and fast-math optimizations involving signed zeros, not-a-number, and infinities, which do not result in loss of accuracy. We explored multiple encodings for various floating point operations to account for the various kinds of undefined behavior and under-specification in the LLVM’s language reference manual.  4. Compiler developers typically transform an incorrect peephole optimization into a valid one by strengthening the precondition. This process is challenging and tedious even when the Alive-NJ prototype provides a counterexample. To help compiler writers develop a correct peephole optimization in such a scenario, we have developed ALIVE-INFER, a data-driven approach that infers preconditions for peephole optimizations expressed in Alive. ALIVE-INFER generates positive and negative examples for an optimization, enumerates predicates ondemand, and learns a set of predicates that separate the positive and negative examples. ALIVE-INFER repeats this process until it finds a precondition that ensures the validity of the optimization. ALIVE-INFER reports both a weakest precondition and a set of succinct partial preconditions to the developer. Our prototype generates preconditions that are weaker than LLVM’s preconditions for numerous optimizations. We also demonstrate the applicability of this technique to generalize optimization patterns generated by Souper, an LLVM IR&ndash;based superoptimizer.  5. To accomplish our educational goal of training students on formal reasoning skills,  this grant partially supported  the following PhD students on their research related to program analysis and verification: David Menendez, Jay Lim, Adarsh Yoga, Sangeeta Chowdhary, Mohammed Reza Soltaniyeh, and Nader Boushehrinejadmoradi. David Menendez (PhD 2018), Adarsh Yoga (PhD 2019), and Nader Boushehrinejadmoradi (PhD 2021) have subsequently graduated and are deploying these ideas in industry and academia. It also helped train numerous undergraduate students on various project related to formal verification. Two summer REU students Sammy Berger and Josh Cooper worked on formal verification for low-level code in the summer of 2020.   Overall, our research findings and prototypes advance the state-of-the-art in formal verification of mainstream compilers. We have published our research findings at premier research venues. Furthermore, the grant was helpful in training  PhD and undergraduate students in part, who are now applying these ideas in the field.                Last Modified: 03/01/2021       Submitted by: Santosh Nagarakatte]]></POR_COPY_TXT>
</POR>
</Award>
</rootTag>
